(this["webpackJsonpreact-globe-test"]=this["webpackJsonpreact-globe-test"]||[]).push([[0],{28:function(e,t,n){},3:function(e,t){e.exports=Cesium},40:function(e,t,n){},41:function(e,t,n){},65:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(21),i=n.n(a),o=(n(65),n(6)),s=n.n(o),l=n(23),u=n(12),d=(n(40),n(43)),b=n.n(d),j=n(11),f="SAVE_USER_NAME",p="SKIP_INTRO",h="CHANGE_NAME",O="PICK_COORDINATES",m="NO_NEARBY_CITIES",g="NEARBY_CITIES_FETCH_SUCCEEDED",y="NEARBY_CITIES_FETCH_FAILED",v="GET_SINGLE_CITY_DATA",x="SINGLE_CITY_DATA_FETCH_SUCCEEDED",C="SINGLE_CITY_DATA_FETCH_FAILED",w="RESET_SINGLE_CITY",N="EXTENDED_CITY_DATA_FETCH_SUCCEDEED",k="EXTENDED_CITY_DATA_FETCH_FAILED",E="SAVE_RECENT_LOCATIONS",_="DELETE_SINGLE_RECENT_LOCATION",T="CLEAR_RECENTS_LIST",S="SET_WIDGET_PAGE_CATEGORY",D=n(10),L=function(e,t){Object(c.useEffect)((function(){var n=function(n){e.current&&n.target&&!e.current.contains(n.target)&&e.current!==n.target&&t()};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[e,t])},I="/nomado",A="/nomado/dart",B="/nomado/city/:id",R="/nomado/recentlist",F="/nomado/widget",W=function(e,t,n){return{type:x,payload:{cityName:e,cityCoords:t,cityLink:n}}},M=["scores","costs","salaries","crime","education","tolerance","weather","outdoors","startup"],P=["\ud83d\ude03","\ud83d\udcb8","\ud83d\udcb9","\ud83e\uddb9\u200d\u2642\ufe0f","\ud83c\udfeb","\ud83c\udf08","\ud83c\udf1e","\ud83d\uddfb","\ud83d\udcbb"],G=["Welcome digital nomad","what do they call you?"],U=(n(41),n(1)),Y=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(c.useRef)(null),i=Object(j.b)(),o=Object(j.c)((function(e){return e.widgetPage.category}));return L(a,(function(){return r(!1)})),Object(U.jsxs)("div",{ref:a,className:"category-dropdown",children:[Object(U.jsxs)("div",{className:"category-dropdown-label",onClick:function(){return r((function(e){return!e}))},children:["category: ",o,n?"\ud83d\udd3c":"\ud83d\udd3d"]}),Object(U.jsx)("ul",{className:"category-dropdown-list",style:{display:n?"":"none"},children:M.map((function(e){return Object(U.jsx)("li",{id:e,className:"dropdown-item",onClick:function(){return i(function(e){return{type:S,payload:e}}(e))},children:e},e)}))})]})},H=function(){var e=Object(j.c)((function(e){return e.splashScreen.userName})),t=Object(c.useState)(!1),n=Object(u.a)(t,2),r=n[0],a=n[1],i=Object(c.useRef)(null),o=Object(D.g)(),s=Object(j.b)();return L(i,(function(){return a(!1)})),Object(U.jsxs)("div",{className:"navbar-wrapper",children:[o.location.pathname!==I&&Object(U.jsx)("h1",{className:"home-label",onClick:function(){o.push(I),s({type:w})},children:"Home"}),Object(U.jsx)("div",{children:o.location.pathname===F&&Object(U.jsx)(Y,{})}),Object(U.jsxs)("div",{ref:i,className:"nav-item",children:[Object(U.jsx)("img",{className:"avatar",src:"https://avatars.dicebear.com/api/identicon/".concat(e,".svg"),alt:""}),Object(U.jsxs)("div",{className:"dropdown-chevron",onClick:function(){a((function(e){return!e}))},children:[e,r?"\ud83d\udd3c":"\ud83d\udd3d"]}),Object(U.jsxs)("ul",{className:"dropdown-menu",style:{display:r?"":"none"},children:[Object(U.jsx)("li",{id:"recent-locations",className:"dropdown-item",onClick:function(){return o.push(R)},children:"show recently viewed locations"}),Object(U.jsx)("li",{className:"dropdown-item",onClick:function(){return s({type:h})},children:"change name"})]})]})]})},z=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),i=Object(u.a)(a,2),o=i[0],s=i[1],l=Object(c.useState)(""),d=Object(u.a)(l,2),h=d[0],O=d[1],m=Object(c.useRef)(null),g=Object(c.useRef)(null),y=Object(c.useRef)(null),v=Object(j.c)((function(e){return e.splashScreen.skippedIntro})),x=Object(c.useState)(v),C=Object(u.a)(x,2),w=C[0],N=C[1],k=Object(j.b)();Object(c.useEffect)((function(){v||_()}),[v]);var E=function(){var e=y.current;e.style.height="8vh",e.style.boxShadow="3px 3px 8px #cbced1,-3px -3px 8px #ffffff";var t=g.current;t.style.opacity="0",t.style.marginTop="-20px",setTimeout((function(){return N(!0)}),2e3)},_=function(){var e=y.current;e.style.height="100vh",e.style.boxShadow="",setTimeout((function(){N(!1),s(!0)}),100)},T={strings:G,typeSpeed:50,backSpeed:50,attr:"placeholder",bindInputFocusEvents:!0,onComplete:function(){r(!0),m.current&&m.current.focus(),setTimeout((function(){s(!0)}),3e3)}};return Object(c.useEffect)((function(){m.current&&new b.a(m.current,T).start()}),[]),Object(U.jsx)("div",{className:w?"navbar":"wrapper",ref:y,children:w?Object(U.jsx)(H,{}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{style:{transition:"2s",display:"flex",width:"15em"},children:[Object(U.jsx)("input",{className:"name-input",ref:m,style:{borderBottom:n?"1px white solid":""},value:h,onChange:function(e){return O(e.target.value)}}),h.length>0&&Object(U.jsx)("button",{className:"styled-button",onClick:function(){k({type:f,payload:h}),E()},children:"ok"})]}),Object(U.jsx)("div",{className:"skipWrapper",ref:g,style:{marginTop:o?"77px":"100px"},children:o&&Object(U.jsx)("button",{className:"styled-button",onClick:function(){E(),k({type:p})},children:"skip"})})]})})},J=n(45),V=n(3),K=function(e){return{type:O,payload:e}},X=function(e,t,n){return{type:g,payload:{cityNames:e,cityCoords:t,cityLinks:n}}},q=function(){var e=Object(c.useRef)(null),t=Object(j.c)((function(e){return e.globe.fetchedNearCities.cityCoords})),n=Object(j.c)((function(e){return e.globe.fetchedNearCities.cityNames})),r=Object(j.c)((function(e){return e.globe.fetchedNearCities.cityLinks})),a=Object(j.c)((function(e){return e.singleCity})),i=Object(j.b)(),o=Object(c.useState)(),s=Object(u.a)(o,2),l=s[0],d=s[1];Object(c.useEffect)((function(){var t;e&&d(null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.cesiumElement)}),[]);var b=Object(D.g)(),f=function e(t,n){l&&l.camera.flyTo({destination:V.Cartesian3.fromDegrees(t,0,2e7),easingFunction:function(e){return e},duration:n,complete:function(){return e(t-90,n)}})};switch(b.location.pathname){case A:f(-90,.2);break;case I:f(-180,10)}return Object(c.useEffect)((function(){if(new RegExp("".concat(B.split(":")[0],"\\d+")).test(b.location.pathname)&&l){if(1===(null===t||void 0===t?void 0:t.length)){l.camera.flyTo({destination:V.Cartesian3.fromDegrees(t[0].long,t[0].lat,2e4)});var e=r[0].split(":").pop();a.id!==e&&b.push(B.replace(":id",e))}if((null===t||void 0===t?void 0:t.length)>1){var n=t.reduce((function(e,t){return e.long+t.long}))/t.length,c=t.reduce((function(e,t){return e.lat+t.lat}))/t.length;l.camera.flyTo({destination:V.Cartesian3.fromDegrees(n,c,4e4)})}}}),[t,l]),Object(U.jsx)(J.a,{ref:e,full:!0,onClick:function(e){var t,c,r,a=l.scene,o=null!==(t=null===(c=(r=l.camera).pickEllipsoid)||void 0===c?void 0:c.call(r,e.position,a.globe.ellipsoid))&&void 0!==t?t:null;if(o){var s=V.Cartographic.fromCartesian(o);i(K({long:V.Math.toDegrees(s.longitude),lat:V.Math.toDegrees(s.latitude)}));var u=V.Cartesian3.fromRadians(s.longitude,s.latitude,0===n.length?2e7:2e4);null===l||void 0===l||l.camera.flyTo({destination:u,easingFunction:function(e){return e},duration:1})}}})},Q=n(4),$=(n(28),function(e){var t=e.options,n=Object(c.useState)(0),r=Object(u.a)(n,2),a=r[0],i=r[1];return Object(U.jsx)("div",{className:"card-wrapper",children:Object(U.jsxs)("div",{className:"home-tab-card-wrapper",children:[Object(U.jsx)("div",{className:"simple-flex",children:t.map((function(e,n){var c=n===a?"selected-tab":n===a-1?"tab-before":n===a+1?"tab-after":0===n?"left-edge-tab":n===t.length-1?"right-edge-tab":"further-tab";return Object(U.jsx)("div",{onClick:function(){return i(n)},className:"single-tab-header",children:Object(U.jsx)("h1",{className:c,children:e.shortTitle})},n)}))}),t[a].body]})})}),Z=function(e){var t=e.option,n=Object(D.g)();return Object(U.jsxs)("div",{className:"column-flex",children:[Object(U.jsx)("h1",{children:t.title}),Object(U.jsx)("p",{className:"paragraph",children:t.paragraph}),Object(U.jsx)("p",{onClick:function(){return n.push(t.address)},className:"tab-button",children:t.emoji})]})},ee=n(46),te=function(e){var t=e.title,n=e.paragraph,c=e.emoji,r=e.address,a=Object(D.g)();return Object(U.jsx)("div",{onClick:function(){return a.push(r)},children:Object(U.jsx)(ee.a,{className:"tilt-parallax",perspective:1e3,glareBorderRadius:"10px",glareEnable:!0,glareMaxOpacity:.9,glareColor:"lightblue",glarePosition:"all",scale:1.1,children:Object(U.jsxs)("div",{className:"tilt-card-inner-wrapper",children:[Object(U.jsx)("h1",{className:"tilt-transform",children:t}),Object(U.jsx)("p",{className:"tilt-transform",children:n}),Object(U.jsx)("p",{className:"big-tilt-transform",children:c})]})})})},ne=function(){var e=[{shortTitle:"Dart throw\ud83c\udfaf",title:"Try your luck",paragraph:"throw a dart at the globe to select destination of your next journey",emoji:"\ud83c\udfaf",address:A},{shortTitle:"Widget\ud83d\udd0d",title:"Search by Widget",paragraph:"search for details a holiday destination by browsing through the Teleport widget",emoji:"\ud83d\udd0d",address:F}],t=function(e){var t=Object(c.useState)(!1),n=Object(u.a)(t,2),r=n[0],a=n[1];return Object(c.useEffect)((function(){var t=window.matchMedia(e);t.matches!==r&&a(t.matches);var n=function(){return a(t.matches)};return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[r,e]),r}("(max-width: 833px)");return Object(U.jsx)(U.Fragment,{children:t?Object(U.jsx)($,{options:e.map((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{body:Object(U.jsx)(Z,{option:e})})}))}):Object(U.jsx)("div",{className:"card-wrapper",children:e.map((function(e){return Object(U.jsx)(te,{title:e.title,paragraph:e.paragraph,emoji:e.emoji,address:e.address},e.title)}))})})},ce=n(32),re=Object(ce.a)((function(e){return e.globe.fetchedNearCities.cityNames}),(function(e){return e.globe.fetchedNearCities.cityCoords}),(function(e){return e.globe.fetchedNearCities.cityLinks}),(function(e,t,n){return 1===e.length||1===t.length||1===n.length?{name:e[0],coords:t[0],link:n[0]}:0!==e.length&&0!==t.length&&1!==n.length})),ae=(n(74),function(){var e=Object(D.g)(),t=Object(j.c)(re);return Object(c.useEffect)((function(){if("boolean"!==typeof t){var n=t.link.split(":").pop().split("/")[0];e.push(B.replace(":id",n))}}),[t]),Object(U.jsx)("div",{className:"dart-top-label",children:"click on globe to throw a dart"})}),ie=n(59),oe=Object(ce.a)((function(e){var t,n,c,r;return null!==(t=null===(n=e.singleCity.extendedCityData.data)||void 0===n||null===(c=n._embedded)||void 0===c||null===(r=c["city:urban_area"])||void 0===r?void 0:r.slug)&&void 0!==t&&t}),(function(e){return e})),se=function(e){var t=e.options,n=Object(c.useState)(0),r=Object(u.a)(n,2),a=r[0],i=r[1],o=Object(c.useState)(!0),s=Object(u.a)(o,2),l=s[0],d=s[1];return Object(U.jsx)("div",{className:"tab-card-wrapper",children:Object(U.jsxs)("div",{className:"tab-card",children:[Object(U.jsxs)("div",{className:"tab-headers",children:[t.map((function(e,n){var c=n===a?"selected-tab":n===a-1?"tab-before":n===a+1?"tab-after":0===n?"left-edge-tab":n===t.length-1?"right-edge-tab":"further-tab";return Object(U.jsx)("div",{onClick:function(){return i(n)},className:"single-tab-header",children:Object(U.jsx)("h1",{className:c,children:e.shortTitle})},n)})),Object(U.jsx)("div",{className:"card-tab-chevron",onClick:function(){d((function(e){return!e}))},children:l?"\ud83d\udd3d":"\ud83d\udd3c"})]}),l&&t[a].body]})})},le=(n(75),function(e){var t=e.category,n=e.urbanArea;return Object(U.jsx)("iframe",{className:"widget-tab",src:"https://teleport.org/cities/".concat(n,"/widget/").concat(t,"/?currency=USD&citySwitcher=false"),title:"widget"})}),ue=function(){var e,t,n,c,r,a,i,o,s=Object(j.c)((function(e){return e.singleCity.extendedCityData.data})),l=null===(e=s._embedded)||void 0===e?void 0:e["city:alternate-names"].alternate_names;return Object(U.jsxs)("div",{className:"basic-info-wrapper",children:[Object(U.jsx)("h1",{children:s.full_name}),Object(U.jsxs)("div",{children:[Object(U.jsxs)("p",{className:"center-text",children:["city population: ",s.population]}),Object(U.jsxs)("p",{className:"center-text",children:["country population: ",null!==(t=null===(n=s._embedded)||void 0===n?void 0:n["city:country"].population)&&void 0!==t?t:""]})]}),Object(U.jsxs)("p",{className:"center-text",children:["currency: ",null!==(c=null===(r=s._embedded)||void 0===r||null===(a=r["city:country"])||void 0===a?void 0:a.currency_code)&&void 0!==c?c:""]}),(null===l||void 0===l?void 0:l.length)>1&&Object(U.jsxs)("div",{className:"alternate-names",children:["alternative names:",Object(U.jsx)("div",{className:"alternate-names-scroller",children:l.map((function(e){return Object(U.jsx)("p",{className:"no-margin",children:e.name},e.name)}))})]}),Object(U.jsxs)("p",{className:"center-text",children:["timezone: ",null!==(i=null===(o=s._embedded)||void 0===o?void 0:o["city:timezone"].iana_name)&&void 0!==i?i:""]})]})},de=function(e){var t=e.id,n=Object(j.c)((function(e){return e.singleCity.fetchedBasicCityData.cityName})),r=Object(j.c)((function(e){return e.singleCity.id})),a=Object(j.c)((function(e){return e.singleCity.fetchedBasicCityData.cityCoords})),i=Object(j.c)((function(e){return e.globe.coords})),o=Object(j.c)(oe),s=Object(j.b)();Object(c.useEffect)((function(){r!==t&&s(function(e){return{type:v,payload:e}}(t)),a.long===i.long&&a.lat===i.lat||s(K({long:a.long,lat:a.lat}))}),[t,a]);var l=[{shortTitle:"Basic Info\ud83c\udf10",body:Object(U.jsx)(ue,{})}];return o&&l.push.apply(l,Object(ie.a)(M.map((function(e,t){return{shortTitle:e.replace(e[0],e[0].toUpperCase()).concat(P[t]),body:Object(U.jsx)(le,{category:e,urbanArea:o})}})))),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("div",{className:"single-city-page-label",children:n}),Object(U.jsx)(se,{options:l})]})},be=function(){var e=Object(j.c)((function(e){return e.widgetPage.category}));return Object(U.jsx)("iframe",{className:"widget-iframe",src:"https://teleport.org/cities/berlin/widget/".concat(e,"/?currency=USD"),title:"widget"})},je=function(e){return{type:E,payload:e}},fe=(n(76),function(){var e=Object(D.g)(),t=Object(j.c)((function(e){return e.recentLocations.list})),n=Object(j.b)();return Object(U.jsxs)("div",{className:"list-wrapper",children:[Object(U.jsx)("ol",{children:t.map((function(t){return Object(U.jsxs)("li",{children:[Object(U.jsx)("span",{className:"clickable",onClick:function(){return e.push(B.replace(":id",t.id))},children:t.cityName}),"- ",t.userName," ",Object(U.jsx)("span",{className:"clickable",onClick:function(){return n((e=t.id,{type:_,payload:e}));var e},children:"\ud83d\uddd1"})]},t.id)}))}),Object(U.jsx)("button",{className:"styled-button",onClick:function(){return n({type:T})},children:"clear list"})]})});var pe=Object(D.h)((function(){return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(z,{}),Object(U.jsxs)(D.d,{children:[Object(U.jsx)(D.b,{exact:!0,path:A,component:ae}),Object(U.jsx)(D.b,{exact:!0,path:F,component:be}),Object(U.jsx)(D.b,{exact:!0,path:B,component:function(e){var t=e.match;return Object(U.jsx)(de,{id:t.params.id})}}),Object(U.jsx)(D.b,{exact:!0,path:R,component:fe}),Object(U.jsx)(D.b,{exact:!0,path:I,component:ne}),Object(U.jsx)(D.a,{to:I})]}),Object(U.jsx)(q,{})]})})),he=n(51),Oe=n(36),me=n(47),ge=n(19),ye=n(60),ve=n(48),xe=n(38),Ce=n(49),we=n.n(Ce),Ne={isLoading:!1,errMess:"",cityNames:[],cityCoords:[],cityLinks:[]},ke=n(8),Ee=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.teleport.org/api/locations/".concat(t.lat,",").concat(t.long,"/?embed=location%3Anearest-cities%2Flocation%3Anearest-city")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=s.a.mark(Te);function Te(e){var t,n,c,r=arguments;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(a.prev=0,t=r.length,n=new Array(t>1?t-1:0),c=1;c<t;c++)n[c-1]=r[c];return a.next=4,ke.b.apply(void 0,[e].concat(n));case 4:a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.error(a.t0);case 9:case"end":return a.stop()}}),_e,null,[[0,6]])}var Se=Te,De=s.a.mark(Ae),Le=s.a.mark(Be),Ie=s.a.mark(Re);function Ae(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ke.e)(O,Se,Be);case 2:case"end":return e.stop()}}),De)}function Be(){var e,t,n,c,r,a;return s.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(ke.d)((function(e){return e.globe.coords}));case 2:return e=i.sent,i.next=5,Object(ke.b)(Ee,e);case 5:if(t=i.sent,n=[],c=[],r=[],!t){i.next=21;break}if(null===(a=t._embedded["location:nearest-cities"])||void 0===a||a.forEach((function(e){r.push(e._links["location:nearest-city"].href),n.push(e._links["location:nearest-city"].name);var t=e._embedded["location:nearest-city"].location.latlon;c.push({long:t.longitude,lat:t.latitude})})),0!==n.length&&0!==c.length){i.next=15;break}return i.next=14,Object(ke.c)({type:m});case 14:return i.abrupt("return");case 15:return i.next=17,Object(ke.c)(X(n,c,r));case 17:return i.next=19,Object(ke.b)(Re,n,c,r);case 19:i.next=23;break;case 21:return i.next=23,Object(ke.c)({type:y});case 23:case"end":return i.stop()}}),Le)}function Re(e,t,n){return s.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(1!==e.length&&1!==t.length&&1!==n.length){c.next=3;break}return c.next=3,Object(ke.c)(W(e[0],t[0],n[0]));case 3:case"end":return c.stop()}}),Ie)}var Fe=Ae,We=s.a.mark(Pe),Me=s.a.mark(Ge);function Pe(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ke.e)(x,Ge);case 2:case"end":return e.stop()}}),We)}function Ge(){var e,t,n,c;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(ke.d)((function(e){return e.recentLocations.list}));case 2:return e=r.sent,r.next=5,Object(ke.d)((function(e){return e.splashScreen.userName}));case 5:return t=r.sent,r.next=8,Object(ke.d)((function(e){return e.singleCity}));case 8:if(n=r.sent,c=JSON.parse(JSON.stringify(e)),e.find((function(e){return e.id===n.id}))&&(c=e.filter((function(e){return e.id!==n.id}))),e.length>=40&&(c=e.slice(0,-1)),c.unshift({id:n.id,userName:t,cityName:n.fetchedBasicCityData.cityName}),n.fetchedBasicCityData.cityLink.split(":").pop().split("/")[0]!==n.id){r.next=17;break}return r.next=17,Object(ke.c)(je(c));case 17:return r.abrupt("return");case 18:case"end":return r.stop()}}),Me)}var Ue=Pe,Ye=function(){var e=Object(l.a)(s.a.mark((function e(t,n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="",n&&(c+=n),e.abrupt("return",fetch("https://api.teleport.org/api/cities/geonameid:".concat(t,"/").concat(c)).then((function(e){return e.json()})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),He=s.a.mark(Ke),ze=s.a.mark(Xe),Je=s.a.mark(qe),Ve=s.a.mark(Qe);function Ke(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ke.f)(v,Se,Xe);case 2:case"end":return e.stop()}}),He)}function Xe(){var e,t;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(ke.d)((function(e){return e.singleCity.id}));case 2:return e=n.sent,n.next=5,Object(ke.b)(Ye,e);case 5:if(!(t=n.sent)){n.next=11;break}return n.next=9,Object(ke.a)([Object(ke.b)(qe,t),Object(ke.b)(Qe,t)]);case 9:n.next=13;break;case 11:return n.next=13,Object(ke.c)({type:C});case 13:case"end":return n.stop()}}),ze)}function qe(e){var t,n,c,r;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(ke.d)((function(e){return e.singleCity.fetchedBasicCityData.cityLink}));case 2:return t=a.sent,a.next=5,Object(ke.d)((function(e){return e.singleCity.fetchedBasicCityData.cityName}));case 5:return n=a.sent,a.next=8,Object(ke.d)((function(e){return e.singleCity.fetchedBasicCityData.cityCoords}));case 8:if(c=a.sent,!(t.length<1||n.length<1)&&c.long&&c.lat){a.next=13;break}return r=e.location.latlon,a.next=13,Object(ke.c)(W(e.name,{long:r.longitude,lat:r.latitude},e._links.self.href));case 13:case"end":return a.stop()}}),Je)}function Qe(e){var t,n,c,r;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(ke.d)((function(e){return e.singleCity.id}));case 2:return t=a.sent,n=Object.keys(e._links).filter((function(e){return e.includes("city")})),c="",n&&n.length>0&&n.forEach((function(e,t){c+=0===t?"?embed=":"&embed=",c+=e})),a.next=8,Object(ke.b)(Ye,t,c);case 8:if(!(r=a.sent)){a.next=14;break}return a.next=12,Object(ke.c)({type:N,payload:r});case 12:a.next=16;break;case 14:return a.next=16,Object(ke.c)({type:k});case 16:case"end":return a.stop()}}),Ve)}var $e=Ke,Ze=s.a.mark(et);function et(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ke.a)([Fe(),$e(),Ue()]);case 2:case"end":return e.stop()}}),Ze)}var tt={isLoading:!1,errMess:"",cityName:"",cityCoords:{},cityLink:""},nt={isLoading:!1,errMess:"",data:{}},ct={key:"root",storage:we.a,debug:!0},rt=Object(ge.combineReducers)({splashScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userName:"",skippedIntro:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(Q.a)(Object(Q.a)({},e),{},{userName:t.payload,skippedIntro:!0});case p:return Object(Q.a)(Object(Q.a)({},e),{},{skippedIntro:!0});case h:return Object(Q.a)(Object(Q.a)({},e),{},{skippedIntro:!1});default:return e}},globe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{coords:{long:0,lat:0},fetchedNearCities:Ne},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(Q.a)(Object(Q.a)({},e),{},{coords:t.payload});case m:return Object(Q.a)(Object(Q.a)({},e),{},{fetchedNearCities:Ne});case y:return Object(Q.a)(Object(Q.a)({},e),{},{fetchedNearCities:Object(Q.a)(Object(Q.a)({},Ne),{},{errMess:"failed to fetch"})});case g:return Object(Q.a)(Object(Q.a)({},e),{},{fetchedNearCities:Object(Q.a)(Object(Q.a)({},Ne),{},{cityNames:t.payload.cityNames,cityCoords:t.payload.cityCoords,cityLinks:t.payload.cityLinks})});case w:return Object(Q.a)(Object(Q.a)({},e),{},{fetchedNearCities:Ne});default:return e}},singleCity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",fetchedBasicCityData:tt,extendedCityData:nt},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:var n,c,r,a,i=null!==(n=null===(c=e.fetchedBasicCityData.cityLink.split(":").pop())||void 0===c||null===(r=c.split)||void 0===r||null===(a=r.call(c,"/"))||void 0===a?void 0:a[0])&&void 0!==n?n:"";return Object(Q.a)(Object(Q.a)({},e),{},{id:t.payload,fetchedBasicCityData:i===t.payload?e.fetchedBasicCityData:Object(Q.a)(Object(Q.a)({},tt),{},{isloading:!0})});case x:return Object(Q.a)(Object(Q.a)({},e),{},{fetchedBasicCityData:Object(Q.a)(Object(Q.a)({},tt),{},{cityName:t.payload.cityName,cityCoords:t.payload.cityCoords,cityLink:t.payload.cityLink})});case C:return Object(Q.a)(Object(Q.a)({},e),{},{sfetchedBasicCityData:Object(Q.a)(Object(Q.a)({},tt),{},{errMess:"failed to fetch basic city info"})});case w:return Object(Q.a)(Object(Q.a)({},e),{},{id:"",fetchedBasicCityData:tt,extendedCityData:nt});case N:return Object(Q.a)(Object(Q.a)({},e),{},{extendedCityData:Object(Q.a)(Object(Q.a)({},nt),{},{data:t.payload})});case k:return Object(Q.a)(Object(Q.a)({},e),{},{extendedCityData:Object(Q.a)(Object(Q.a)({},nt),{},{errMess:"could not fetch extended data"})});default:return e}},recentLocations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(Q.a)(Object(Q.a)({},e),{},{list:t.payload});case _:return Object(Q.a)(Object(Q.a)({},e),{},{list:e.list.filter((function(e){return e.id!==t.payload}))});case T:return Object(Q.a)(Object(Q.a)({},e),{},{list:[]});default:return e}},widgetPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{category:"startup"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(Q.a)(Object(Q.a)({},e),{},{category:t.payload});default:return e}}}),at=Object(xe.a)(ct,rt),it=Object(ye.a)(),ot=n(50),st=function(e){var t=e.error,n=e.resetErrorBoundary;return Object(U.jsx)("div",{className:"error-fallback-container",children:Object(U.jsxs)("div",{role:"alert",children:[Object(U.jsx)("h1",{className:"center-text",children:"Something Went Wrong \ud83d\ude15"}),Object(U.jsx)("pre",{className:"red-text",children:t.message}),Object(U.jsx)("button",{onClick:function(){n(),caches&&caches.keys().then((function(e){var t,n=Object(ot.a)(e);try{for(n.s();!(t=n.n()).done;){var c=t.value;caches.delete(c)}}catch(r){n.e(r)}finally{n.f()}})),document.location.href=I},children:"try again"})]})})},lt=function(){var e=Object(ve.composeWithDevTools)({trace:!0,traceLimit:25}),t=Object(ge.createStore)(at,e(Object(ge.applyMiddleware)(it))),n=Object(xe.b)(t);return it.run(et),window.Cypress&&(window.store=t),{store:t,persistor:n}}(),ut=lt.store,dt=lt.persistor;var bt=function(){return Object(U.jsx)(he.ErrorBoundary,{FallbackComponent:st,onReset:Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.purge();case 2:case"end":return e.stop()}}),e)}))),children:Object(U.jsx)(j.a,{store:ut,children:Object(U.jsx)(me.a,{loading:null,persistor:dt,children:Object(U.jsx)(Oe.a,{children:Object(U.jsx)(pe,{})})})})})},jt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ft(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var pt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,83)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},ht=(n(79),function(){return Object(U.jsx)("div",{className:"container",children:Object(U.jsxs)("div",{className:"spinner",children:[Object(U.jsx)("div",{}),Object(U.jsx)("div",{})]})})}),Ot=n(39),mt=n(53),gt=n(55),yt=n(82);Ot.a.use(mt.a).use(gt.a).use(yt.a).init({fallbackLng:"en",debug:!1,detection:{order:["querystring","cookie","header"],lookupCookie:"lang",lookupQuerystring:"lang",caches:["cookie"]},interpolation:{escapeValue:!1}});Ot.a;i.a.render(Object(U.jsx)(r.a.StrictMode,{children:Object(U.jsx)(c.Suspense,{fallback:Object(U.jsx)(ht,{}),children:Object(U.jsx)(bt,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/nomado",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/nomado","/service-worker.js");jt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ft(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ft(t,e)}))}}(),pt()}},[[80,1,2]]]);
//# sourceMappingURL=main.0f3e4c56.chunk.js.map